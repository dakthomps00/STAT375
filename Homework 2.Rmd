---
title: "Homework 2"
author: "Dakota Thompson"
date: "2/19/2021"
output: word_document
---

```{r setup, include=FALSE}
library(hms)
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE)
```

# Exercise 4 on p. 124
## Practice referring to nonsyntactic names in the following data frame by:

```{r}
annoying <- tibble( 
  `1` = 1:10,
  `2` = `1` * 2 + rnorm(length(`1`))
  )
annoying
```

### a. Extracting the variable called 1

```{r}
a <- annoying$`1`
a
```

### b. Plotting a scatterplot of 1 versus 2.

```{r}
b <- plot(`1` ~ `2`, annoying)
b
```

### c. Creating a new column called 3, which is 2 divided by 1.

```{r}
c <- annoying %>%
  mutate(`3` = `2`/`1`)
c
```

### d. Renaming the columns to one, two, and three

```{r}
d <- c %>%
  rename("one" = `1`, "two" = `2`, "three" = `3`)
d
```

# Exercise 5 on p. 124
## What does tibble::enframe() do?

It takes a vector and turns it into a tibble data frame with names and values.

## When might you use it?

You might want to use it when you want to do functions on the variables themselves (for example, if one was gender and one was height in a vector, you might want to easily break it out into height by gender (M or F)).

# Exercise 7 on p. 137
## Generate the correct format string to parse each of the following dates and times:
d1 <- "January 1, 2010"
d2 <- "2015-Mar-07"
d3 <- "06-Jun-2017"
d4 <- c("August 19 (2015)", "July 1 (2015)")
d5 <- "12/30/14" # Dec 30, 2014
t1 <- "1705"
t2 <- "11:15:10.12 PM"

```{r}
d1 <- parse_date("January 1, 2010", "%B %d, %Y")
d2 <- parse_date("2015-Mar-07", "%Y-%b-%d")
d3 <- parse_date("06-Jun-2017", "%d-%b-%Y")
d4 <- parse_date(c("August 19 (2015)", "July 1 (2015)"), "%B %d (%Y)")
d5 <- parse_date("12/30/14", "%m/%d/%y") # Dec 30, 2014
t1 <- parse_time("1705", "%H%M")
t2 <- parse_time("11:15:10.12 PM")

d1
d2
d3
d4
d5
t1
t2
```

# Exercise 2 on p. 151
## Compute the rate for table2, and table4a + table4b. You will need to perform four operations:

```{r}
table2
table4a
table4b
```

### a. Extract the number of TB cases per country per year.

```{r}
table2cases <- table2 %>%
  filter(type == "cases") %>%
  rename("cases" = count) %>%
  arrange(country, year)
table2cases
```

For Table 2, we first take out all the rows that are cases from type and then change the name of the count of the cases to just cases for when we later combine the 2 tables.

### b. Extract the matching population per country per year.

```{r}
table2pop <- table2 %>%
  filter(type == "population") %>%
  rename("population" = count) %>%
  arrange(country, year)
table2pop
```

For Table 2, we then take out all the rows that are population from type and then change the name of the count of the population to just population for when we later combine the 2 tables. We also want to make sure to organize the data so rows are matching in both tables.

### c. Divide cases by population, and multiply by 10,000.

```{r}
table2combine <- tibble(
  country = table2cases$country,
  year = table2cases$year,
  cases = table2cases$cases,
  population = table2pop$population
)
table2combine

table2rte <- table2combine %>%
  mutate(rate = (cases / population) * 10000)
table2rte
```

We then finally combine the 2 tables to have the matching rows. After that, we mutate the table to add on the rate of the cases per population per year.

### d. Store back in the appropriate place.

```{r}
table2rte <- table2rte %>%
  mutate(type = "rate") %>%
  rename(count = rate)
table2rte

table2final <- bind_rows(table2, table2rte) %>%
  arrange(country, year, type, count)

table2final <- table2final %>%
  mutate(cases=NULL, population=NULL)
table2final
```

Finally, we have to put it back in the original data frame. To do that we change rate to math the original tables conventions with type and count, then stick the tables together.

```{r}
table4together <- tibble(
  country = table4a$country,
  cases99 = table4a$`1999`,
  pop99 = table4b$`1999`,
  rate99 = table4a$`1999` / table4b$`1999` * 10000,
  cases00 = table4a$`2000`,
  pop00 = table4b$`2000`,
  rate00 = table4a$`2000` / table4b$`2000` * 10000)
table4together
```

For the 4a and 4b tables, we can easily do everything in one fell swoop. We just take each variable from each table and combine them into one tibble.

## Which representation is easiest to work with? Which is hardest? Why?

I don't think either is particularly fun to work with, however I do think in the long run table 2 will be easier to use. While 4a&b was much faster to fix to figure out the rate, the years are hard to get out of the table having been attached to the cases and population. On the other hand, 2 took much more work, but every single variable is in its own column and will be easier to group in different ways later. 